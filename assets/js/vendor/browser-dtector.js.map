{"version":3,"sources":["../lib/constants.ts","../lib/utils.ts","../package.json","../lib/browser-dtector.ts"],"sourcesContent":["export const KnownBrowsers = {\n  chrome: 'Google Chrome',\n  brave: 'Brave',\n  crios: 'Google Chrome',\n  edge: 'Microsoft Edge',\n  edg: 'Microsoft Edge',\n  edgios: 'Microsoft Edge',\n  fennec: 'Mozilla Firefox',\n  jsdom: 'JsDOM',\n  mozilla: 'Mozilla Firefox',\n  fxios: 'Mozilla Firefox',\n  msie: 'Microsoft Internet Explorer',\n  opera: 'Opera',\n  opios: 'Opera',\n  opr: 'Opera',\n  opt: 'Opera',\n  rv: 'Microsoft Internet Explorer',\n  safari: 'Safari',\n  samsungbrowser: 'Samsung Browser',\n  electron: 'Electron',\n};\n\nexport const KnownPlatforms = {\n  'android': 'Android',\n  'androidTablet': 'Android Tablet',\n  'cros': 'Chrome OS',\n  'fennec': 'Android Tablet',\n  'ipad': 'IPad',\n  'ipod': 'IPod',\n  'iphone': 'IPhone',\n  'jsdom': 'JsDOM',\n  'linux': 'Linux',\n  'mac': 'Macintosh',\n  'tablet': 'Android Tablet',\n  'win': 'Windows',\n  'windows phone': 'Windows Phone',\n  'xbox': 'Microsoft Xbox',\n};\n","const toFixed = (val: string | number, fixed = -1): string | null => {\n  const REG_EXP = new RegExp(`^-?\\\\d+(?:.\\\\d{0,${fixed}})?`);\n  const match = Number(val).toString().match(REG_EXP);\n  return match ? match[0] : null;\n};\n\nexport default {\n  toFixed,\n};\n","{\n  \"name\": \"browser-dtector\",\n  \"version\": \"4.1.0\",\n  \"description\": \"A Javascript library to detect browser, version and platform\",\n  \"author\": \"sibiraj-s\",\n  \"license\": \"MIT\",\n  \"type\": \"module\",\n  \"repository\": \"https://github.com/sibiraj-s/browser-dtector.git\",\n  \"homepage\": \"https://github.com/sibiraj-s/browser-dtector#readme\",\n  \"bugs\": \"https://github.com/sibiraj-s/browser-dtector/issues\",\n  \"funding\": [\n    {\n      \"type\": \"github\",\n      \"url\": \"https://github.com/sponsors/sibiraj-s\"\n    }\n  ],\n  \"engines\": {\n    \"node\": \">=16\"\n  },\n  \"sideEffects\": false,\n  \"files\": [\n    \"dist\"\n  ],\n  \"main\": \"./dist/browser-dtector.cjs\",\n  \"module\": \"./dist/browser-dtector.js\",\n  \"types\": \"./dist/browser-dtector.d.ts\",\n  \"exports\": {\n    \".\": {\n      \"require\": {\n        \"types\": \"./dist/browser-dtector.d.cts\",\n        \"default\": \"./dist/browser-dtector.cjs\"\n      },\n      \"import\": \"./dist/browser-dtector.js\",\n      \"types\": \"./dist/browser-dtector.d.ts\"\n    },\n    \"./package.json\": \"./package.json\"\n  },\n  \"scripts\": {\n    \"build\": \"tsup\",\n    \"build:docs\": \"vite build --base /browser-dtector/\",\n    \"serve\": \"vite\",\n    \"test\": \"vitest\",\n    \"lint\": \"eslint . --ext .js,.ts --ignore-path .gitignore\",\n    \"prepare\": \"is-ci || husky install\"\n  },\n  \"keywords\": [\n    \"browser-detector\",\n    \"detect-browser\",\n    \"useragent-parser\",\n    \"ua-parser\"\n  ],\n  \"devDependencies\": {\n    \"@commitlint/cli\": \"^18.2.0\",\n    \"@commitlint/config-conventional\": \"^18.1.0\",\n    \"@types/react\": \"^18.2.34\",\n    \"@types/react-dom\": \"^18.2.14\",\n    \"eslint\": \"^8.52.0\",\n    \"eslint-config-pegasus\": \"^5.0.0\",\n    \"eslint-plugin-react\": \"^7.33.2\",\n    \"eslint-plugin-react-hooks\": \"^4.6.0\",\n    \"happy-dom\": \"^12.10.3\",\n    \"husky\": \"^8.0.3\",\n    \"is-ci\": \"^3.0.1\",\n    \"lint-staged\": \"^15.0.2\",\n    \"publint\": \"^0.2.5\",\n    \"react\": \"^18.2.0\",\n    \"react-dom\": \"^18.2.0\",\n    \"react-router-dom\": \"^6.18.0\",\n    \"sass\": \"^1.69.5\",\n    \"tsup\": \"^7.2.0\",\n    \"typescript\": \"^5.2.2\",\n    \"vite\": \"^4.5.0\",\n    \"vitest\": \"^0.34.6\"\n  }\n}\n","import { KnownBrowsers, KnownPlatforms } from './constants';\nimport utils from './utils';\n\nimport { version as pkgVersion } from '../package.json';\n\nimport {\n  BrowserMatches,\n  KnownBrowsersKeys,\n  KnownPlatformsKeys,\n  NavigatorExtended,\n} from './types';\n\nconst getNavigator = (): NavigatorExtended | null => {\n  if (typeof window !== 'undefined') {\n    return window.navigator as NavigatorExtended;\n  }\n\n  return null;\n};\n\nclass BrowserDetector {\n  userAgent: string | null;\n\n  constructor(inputUA?: string) {\n    this.userAgent = inputUA || getNavigator()?.userAgent || null;\n  }\n\n  static get VERSION(): string {\n    return pkgVersion;\n  }\n\n  parseUserAgent(userAgent?: string) {\n    const browserMatches: BrowserMatches = {} as BrowserMatches;\n\n    const uaFresh = userAgent || this.userAgent || '';\n\n    // convert to lower case and treat tabs and multiple sapces as single space\n    const ua = uaFresh.toLowerCase().replace(/\\s\\s+/g, ' ');\n\n    const browserMatch = (/(edge)\\/([\\w.]+)/).exec(ua)\n      || (/(edg)[/]([\\w.]+)/).exec(ua)\n      || (/(opr)[/]([\\w.]+)/).exec(ua)\n      || (/(opt)[/]([\\w.]+)/).exec(ua)\n      || (/(fxios)[/]([\\w.]+)/).exec(ua)\n      || (/(edgios)[/]([\\w.]+)/).exec(ua)\n      || (/(jsdom)[/]([\\w.]+)/).exec(ua)\n      || (/(samsungbrowser)[/]([\\w.]+)/).exec(ua)\n      || (/(electron)[/]([\\w.]+)/).exec(ua)\n      || (/(chrome)[/]([\\w.]+)/).exec(ua)\n      || (/(crios)[/]([\\w.]+)/).exec(ua)\n      || (/(opios)[/]([\\w.]+)/).exec(ua)\n      || (/(version)(applewebkit)[/]([\\w.]+).*(safari)[/]([\\w.]+)/).exec(ua)\n      || (/(webkit)[/]([\\w.]+).*(version)[/]([\\w.]+).*(safari)[/]([\\w.]+)/).exec(ua)\n      || (/(applewebkit)[/]([\\w.]+).*(safari)[/]([\\w.]+)/).exec(ua)\n      || (/(webkit)[/]([\\w.]+)/).exec(ua)\n      || (/(opera)(?:.*version|)[/]([\\w.]+)/).exec(ua)\n      || (/(msie) ([\\w.]+)/).exec(ua)\n      || (/(fennec)[/]([\\w.]+)/).exec(ua)\n      || (ua.indexOf('trident') >= 0 && (/(rv)(?::| )([\\w.]+)/).exec(ua))\n      || (ua.indexOf('compatible') < 0 && (/(mozilla)(?:.*? rv:([\\w.]+)|)/).exec(ua))\n      || [];\n\n    const platformMatch = (/(ipad)/).exec(ua)\n      || (/(ipod)/).exec(ua)\n      || (/(iphone)/).exec(ua)\n      || (/(jsdom)/).exec(ua)\n      || (/(windows phone)/).exec(ua)\n      || (/(xbox)/).exec(ua)\n      || (/(win)/).exec(ua)\n      || (/(tablet)/).exec(ua)\n      || (((/(android)/).test(ua) && (/(mobile)/).test(ua) === false) && ['androidTablet'])\n      || (/(android)/).exec(ua)\n      || (/(mac)/).exec(ua)\n      || (/(linux)/).exec(ua)\n      || (/(cros)/).exec(ua)\n      || [];\n\n    let name = browserMatch[5] || browserMatch[3] || browserMatch[1] || null;\n    const platform = platformMatch[0] || null;\n    const version = browserMatch[4] || browserMatch[2] || null;\n\n    // brave browser doesn't expose itslef via useragent\n    // but as chrome browser\n    const navigator = getNavigator();\n    if (\n      name === 'chrome'\n      && typeof navigator?.brave?.isBrave === 'function'\n    ) {\n      name = 'brave';\n    }\n\n    if (name) {\n      browserMatches[name as KnownBrowsersKeys] = true;\n    }\n    if (platform) {\n      browserMatches[platform as KnownPlatformsKeys] = true;\n    }\n\n    const isAndroid = Boolean(browserMatches.tablet\n      || browserMatches.android\n      || browserMatches.androidTablet);\n\n    const isTablet = Boolean(browserMatches.ipad\n      || browserMatches.tablet\n      || browserMatches.androidTablet);\n\n    const isMobile = Boolean(browserMatches.android\n      || browserMatches.androidTablet\n      || browserMatches.tablet\n      || browserMatches.ipad\n      || browserMatches.ipod\n      || browserMatches.iphone\n      || browserMatches['windows phone']);\n\n    const isDesktop = Boolean(browserMatches.cros\n      || browserMatches.mac\n      || browserMatches.linux\n      || browserMatches.win);\n\n    const isWebkit = Boolean(browserMatches.brave\n      || browserMatches.chrome\n      || browserMatches.crios\n      || browserMatches.opr\n      || browserMatches.safari\n      || browserMatches.edg\n      || browserMatches.electron);\n\n    const isIE = Boolean(browserMatches.msie\n      || browserMatches.rv);\n\n    const isChrome = Boolean(browserMatches.chrome\n      || browserMatches.crios);\n\n    const isFireFox = Boolean(browserMatches.fxios\n      || browserMatches.fennec\n      || browserMatches.mozilla);\n\n    const isSafari = Boolean(browserMatches.safari);\n\n    const isOpera = Boolean(browserMatches.opera\n      || browserMatches.opios\n      || browserMatches.opr\n      || browserMatches.opt);\n\n    const isEdge = Boolean(browserMatches.edg\n      || browserMatches.edge\n      || browserMatches.edgios);\n\n    const browserInfo = {\n      name: KnownBrowsers[name as KnownBrowsersKeys] ?? null,\n      platform: KnownPlatforms[platform as KnownPlatformsKeys] ?? null,\n      userAgent: uaFresh,\n      version,\n      shortVersion: version ? utils.toFixed(parseFloat(version), 2) : null,\n      isAndroid,\n      isTablet,\n      isMobile,\n      isDesktop,\n      isWebkit,\n      isIE,\n      isChrome,\n      isFireFox,\n      isSafari,\n      isOpera,\n      isEdge,\n    };\n\n    return browserInfo;\n  }\n\n  getBrowserInfo() {\n    const browserInfo = this.parseUserAgent();\n\n    return {\n      name: browserInfo.name,\n      platform: browserInfo.platform,\n      userAgent: browserInfo.userAgent,\n      version: browserInfo.version,\n      shortVersion: browserInfo.shortVersion,\n    };\n  }\n}\n\nexport { KnownBrowsers, KnownPlatforms, BrowserDetector };\nexport default BrowserDetector;\n"],"mappings":"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","names":["version"]}